import{S as E,U as x,F as M}from"./constants-BdnQFqPF.js";import{g as T,c as D}from"./errorHandler-CHgNGPzP.js";const A={first_name:{patterns:["first name","first_name","firstname","fname","given name","legalnamefirstname"],category:"personal"},last_name:{patterns:["last name","last_name","lastname","lname","surname","family name","legalnamelastname"],category:"personal"},full_name:{patterns:["full name","fullname","your name","candidate name","applicant name"],category:"personal"},email:{patterns:["email","e-mail","email address","e-mail address"],category:"personal"},phone:{patterns:["phone","telephone","mobile","cell","phone number","contact number"],category:"personal"},address_line1:{patterns:["address","street","address line 1","street address","address1"],category:"personal"},address_line2:{patterns:["address line 2","apt","suite","unit","address2","apartment"],category:"personal"},city:{patterns:["city","town"],category:"personal"},state:{patterns:["state","province","region"],category:"personal"},zip:{patterns:["zip","postal","zip code","postal code","zipcode"],category:"personal"},country:{patterns:["country","nation"],category:"personal"},linkedin:{patterns:["linkedin","linkedin url","linkedin profile"],category:"personal"},npi_number:{patterns:["npi","national provider","npi number","provider identifier"],category:"credential"},dea_number:{patterns:["dea","dea number","dea license","dea registration"],category:"credential"},dea_expiration:{patterns:["dea expiration","dea exp"],category:"credential"},license_number:{patterns:["license number","license #","license no","rn license","rn #","aprn license","aprn","advanced practice"],category:"credential"},license_state:{patterns:["license state","state of licensure","licensing state"],category:"credential"},license_expiration:{patterns:["license expiration","license exp","expiration date"],category:"credential"},certification_number:{patterns:["certification number","cert number","ancc","board certification"],category:"credential"},prescriptive_authority:{patterns:["prescriptive authority","prescribing authority"],category:"credential"},degree:{patterns:["degree","highest degree","education level","degree type"],category:"education"},school:{patterns:["school","university","college","institution","school name"],category:"education"},graduation_date:{patterns:["graduation","grad date","date of graduation","graduation date"],category:"education"},field_of_study:{patterns:["field of study","major","program","specialty","area of study"],category:"education"},gpa:{patterns:["gpa","grade point","grade point average"],category:"education"},job_title:{patterns:["job title","title","position","role","current title"],category:"experience"},employer:{patterns:["employer","company","organization","facility","company name","employer name"],category:"experience"},start_date:{patterns:["start date","from date","date started","from"],category:"experience"},end_date:{patterns:["end date","to date","date ended","to"],category:"experience"},supervisor:{patterns:["supervisor","manager","reporting to","supervisor name"],category:"experience"},reason_leaving:{patterns:["reason for leaving","reason left","why did you leave"],category:"experience"},felony:{patterns:["felony","convicted of a felony","felony conviction"],category:"screening"},misdemeanor:{patterns:["misdemeanor","misdemeanor conviction"],category:"screening"},license_revoked:{patterns:["revoked","suspended","restricted","license ever been revoked"],category:"screening"},malpractice:{patterns:["malpractice","lawsuit","malpractice claim"],category:"screening"},background_check:{patterns:["background check","consent to background"],category:"screening"},drug_screen:{patterns:["drug screen","drug test"],category:"screening"},work_authorized:{patterns:["authorized to work","legally authorized","work authorization","eligible to work"],category:"screening"},visa_sponsorship:{patterns:["sponsorship","visa sponsorship","require sponsorship"],category:"screening"},salary:{patterns:["salary","desired salary","compensation","pay rate","expected salary","salary expectation"],category:"screening"},start_date_available:{patterns:["start date","earliest start","available date","when can you start","availability"],category:"screening"},veteran:{patterns:["veteran","military","veteran status"],category:"eeo"},disability:{patterns:["disability","disabled","disability status"],category:"eeo"},race_ethnicity:{patterns:["race","ethnicity","race/ethnicity","racial"],category:"eeo"},gender:{patterns:["gender","sex","gender identity"],category:"eeo"},resume_upload:{patterns:["resume","cv","curriculum vitae"],category:"document"},cover_letter_upload:{patterns:["cover letter","covering letter"],category:"document"},license_upload:{patterns:["upload license","license document","attach license"],category:"document"},certification_upload:{patterns:["upload certification","certification document"],category:"document"},other_upload:{patterns:["upload","attach","document","attachment"],category:"document"}},P=["describe","explain","tell us","why","how do you","what makes you","clinical approach","treatment philosophy","leadership style","career goals","professional development","additional information","cover letter","summary of qualifications","anything else","why are you interested","what experience","strengths"];function K(e){if(e.offsetParent===null&&getComputedStyle(e).position!=="fixed")return!1;const t=getComputedStyle(e);if(t.display==="none"||t.visibility==="hidden"||t.opacity==="0")return!1;const n=e.getBoundingClientRect();return n.width>0&&n.height>0}function q(e){const t=e.tagName.toLowerCase();if(t==="select")return"select";if(t==="textarea")return"textarea";if(t==="input"){const n=e.type.toLowerCase();return n==="file"?"file":n==="radio"?"radio":n==="checkbox"?"checkbox":["text","email","tel","url","number","date","month","password","search",""].includes(n)?"input":null}return e.getAttribute("role")==="combobox"||e.getAttribute("role")==="listbox"?"select":e.contentEditable==="true"?"textarea":null}function I(e){var s,c,l,u;const t=e.id;if(t){const d=document.querySelector(`label[for="${CSS.escape(t)}"]`);if(d)return((s=d.textContent)==null?void 0:s.trim())||""}const n=e.closest("label");if(n){const d=n.cloneNode(!0);return d.querySelectorAll("input, select, textarea").forEach(f=>f.remove()),((c=d.textContent)==null?void 0:c.trim())||""}const r=e.getAttribute("aria-labelledby");if(r){const d=r.split(/\s+/).map(h=>{var f,v;return(v=(f=document.getElementById(h))==null?void 0:f.textContent)==null?void 0:v.trim()}).filter(Boolean);if(d.length>0)return d.join(" ")}const o=e.getAttribute("aria-label");if(o)return o;const i=e.previousElementSibling;if(i&&i.tagName.toLowerCase()!=="input"){const d=((l=i.textContent)==null?void 0:l.trim())||"";if(d.length>0&&d.length<100)return d}const a=e.parentElement;if(a){const d=a.querySelectorAll('label, .label, [class*="label"]');for(const h of d){const f=((u=h.textContent)==null?void 0:u.trim())||"";if(f.length>0&&f.length<100)return f}}return""}function L(e){const t=e.toLowerCase().replace(/[^a-z0-9\s]/g," ").trim();if(!t)return null;let n=null,r=0;for(const[o,{patterns:i,category:a}]of Object.entries(A))for(const s of i){if(t===s)return{identifier:o,category:a,confidence:1};if(t.includes(s)){const c=s.length/t.length,l=Math.min(.95,.6+c*.35);l>r&&(r=l,n={identifier:o,category:a,confidence:l})}if(s.includes(t)&&t.length>=3){const l=.4+t.length/s.length*.3;l>r&&(r=l,n={identifier:o,category:a,confidence:l})}}return n}function H(e,t){const n=L(t);if(n&&n.confidence>.7)return n;const r=[e.getAttribute("name"),e.id,e.placeholder,e.getAttribute("aria-label"),e.getAttribute("data-automation-id"),e.getAttribute("data-test"),e.getAttribute("autocomplete")].filter(Boolean);for(const i of r){const a=L(i);if(a&&(a.confidence=Math.max(.5,a.confidence-.1),!n||a.confidence>n.confidence))return a}const o=e.getAttribute("autocomplete");if(o){const a={"given-name":"first_name","family-name":"last_name",name:"full_name",email:"email",tel:"phone","street-address":"address_line1","address-line1":"address_line1","address-line2":"address_line2","address-level2":"city","address-level1":"state","postal-code":"zip",country:"country"}[o];if(a){const s=A[a];return{identifier:a,category:(s==null?void 0:s.category)||"personal",confidence:.9}}}if(e.tagName.toLowerCase()==="textarea"){const i=parseInt(e.getAttribute("maxlength")||"0",10);if(i===0||i>100){const a=(t+" "+e.placeholder).toLowerCase();if(P.some(c=>a.includes(c)))return{identifier:"open_ended_question",category:"open_ended",confidence:.7}}}return n||{identifier:"unknown",category:"unknown",confidence:0}}function R(e){return e.tagName.toLowerCase()==="select"?Array.from(e.options).map(t=>t.text.trim()).filter(Boolean):[]}function m(){const e=[],t=new Set;function n(r){var i;const o=r.querySelectorAll('input, select, textarea, [role="combobox"], [role="listbox"], [contenteditable="true"]');for(const a of o){if(t.has(a))continue;t.add(a);const s=(i=a.type)==null?void 0:i.toLowerCase();if(s==="hidden"||s==="submit"||s==="button"||s==="reset"||!K(a))continue;const c=q(a);if(!c)continue;if(c==="radio"){const f=a.name;if(f&&e.find(C=>C.fieldType==="radio"&&C.name===f))continue}const l=I(a),{identifier:u,category:d,confidence:h}=H(a,l);e.push({element:a,fieldType:c,identifier:u,confidence:h,label:l,name:a.name||"",id:a.id||"",placeholder:a.placeholder||"",ariaLabel:a.getAttribute("aria-label")||"",required:a.hasAttribute("required")||a.getAttribute("aria-required")==="true",currentValue:a.value||"",options:R(a),fieldCategory:d,atsSpecific:!1})}}n(document);try{const r=document.querySelectorAll("iframe");for(const o of r)try{const i=o.contentDocument;i&&n(i)}catch{}}catch{}return e}function U(){const e=window.location.href.toLowerCase(),t=window.location.hostname.toLowerCase(),n=[{name:"Workday",urlPatterns:["myworkdayjobs.com","wd5.myworkday.com","workday.com/en-us/careers"],domChecks:()=>!!document.querySelector("[data-automation-id]")},{name:"Greenhouse",urlPatterns:["boards.greenhouse.io","job-boards.greenhouse.io"],domChecks:()=>!!document.getElementById("application_form")||!!document.querySelector(".application-form")},{name:"Lever",urlPatterns:["jobs.lever.co","lever.co/apply"],domChecks:()=>!!document.querySelector(".posting-page")||!!document.querySelector(".application-form")},{name:"iCIMS",urlPatterns:["icims.com","careers-"],domChecks:()=>!!document.querySelector('[class*="iCIMS"]')},{name:"Ashby",urlPatterns:["jobs.ashbyhq.com","ashbyhq.com"]},{name:"SmartRecruiters",urlPatterns:["jobs.smartrecruiters.com"],domChecks:()=>!!document.querySelector(".js-application-form")},{name:"BambooHR",urlPatterns:["bamboohr.com/careers","bamboohr.com/jobs"]}];for(const r of n)if(r.urlPatterns.some(i=>e.includes(i)||t.includes(i))){const i=r.domChecks?r.domChecks():!0;return{name:r.name,confidence:i?.95:.7}}return null}function O(){const e=m();if(e.length<3)return!1;const t=e.some(r=>r.fieldCategory==="personal"&&r.confidence>.5),n=e.filter(r=>r.confidence>.3).length>=3;return t&&n}function j(e,t){return e.map(n=>z(n,t)).filter(Boolean)}function z(e,t){if(e.identifier==="unknown"&&e.confidence<.3)return null;if(e.identifier==="open_ended_question"||e.fieldCategory==="open_ended")return{field:e,profileKey:"openEndedResponses",value:"",fillMethod:"ai_generate",requiresAI:!0,requiresFile:!1,documentType:null,confidence:e.confidence,status:"needs_ai"};if(e.fieldType==="file")return $(e);const n=B(e,t);if(!n)return null;let r="text";e.fieldType==="select"?r="select":e.fieldType==="radio"?r="radio":e.fieldType==="checkbox"?r="checkbox":(e.identifier.includes("date")||e.identifier.includes("expiration")||e.identifier.includes("graduation"))&&(r="date");let o=n.value;if(r==="select"&&e.options.length>0&&typeof o=="string"){const a=G(o,e.options);a&&(o=a)}const i=o===""||o===null||o===void 0?"no_data":n.confidence<.5?"ambiguous":"ready";return{field:e,profileKey:n.profileKey,value:o??"",fillMethod:r,requiresAI:!1,requiresFile:!1,documentType:null,confidence:n.confidence,status:i}}function B(e,t){const n=t.personal,r=t.credentials,o=t.eeo,i=t.preferences,s={first_name:()=>({profileKey:"personal.firstName",value:n.firstName||"",confidence:e.confidence}),last_name:()=>({profileKey:"personal.lastName",value:n.lastName||"",confidence:e.confidence}),full_name:()=>({profileKey:"personal.fullName",value:`${n.firstName||""} ${n.lastName||""}`.trim(),confidence:e.confidence}),email:()=>({profileKey:"personal.email",value:n.email||"",confidence:e.confidence}),phone:()=>({profileKey:"personal.phone",value:n.phone||"",confidence:e.confidence}),address_line1:()=>({profileKey:"personal.address.line1",value:n.address.line1||"",confidence:e.confidence}),address_line2:()=>({profileKey:"personal.address.line2",value:n.address.line2||"",confidence:e.confidence}),city:()=>({profileKey:"personal.address.city",value:n.address.city||"",confidence:e.confidence}),state:()=>({profileKey:"personal.address.state",value:n.address.state||"",confidence:e.confidence}),zip:()=>({profileKey:"personal.address.zip",value:n.address.zip||"",confidence:e.confidence}),country:()=>({profileKey:"personal.address.country",value:n.address.country||"US",confidence:e.confidence}),linkedin:()=>({profileKey:"personal.linkedinUrl",value:n.linkedinUrl||"",confidence:e.confidence}),npi_number:()=>({profileKey:"credentials.npiNumber",value:r.npiNumber||"",confidence:e.confidence}),dea_number:()=>({profileKey:"credentials.deaNumber",value:r.deaNumber||"",confidence:e.confidence}),dea_expiration:()=>({profileKey:"credentials.deaExpirationDate",value:g(r.deaExpirationDate),confidence:e.confidence}),prescriptive_authority:()=>({profileKey:"practiceAuthority.prescriptiveAuthorityStatus",value:t.practiceAuthority.prescriptiveAuthorityStatus||"",confidence:e.confidence}),license_number:()=>{const c=_(r.licenses,{});return c?{profileKey:"credentials.licenses[0].licenseNumber",value:c.licenseNumber,confidence:e.confidence}:{profileKey:"credentials.licenses[0].licenseNumber",value:"",confidence:.3}},license_state:()=>{const c=_(r.licenses,{});return c?{profileKey:"credentials.licenses[0].licenseState",value:c.licenseState,confidence:e.confidence}:null},license_expiration:()=>{const c=_(r.licenses,{});return c?{profileKey:"credentials.licenses[0].expirationDate",value:g(c.expirationDate),confidence:e.confidence}:null},certification_number:()=>{const c=r.certifications[0];return c?{profileKey:"credentials.certifications[0].certificationNumber",value:c.certificationNumber||"",confidence:e.confidence}:null},degree:()=>{const c=t.education.find(l=>l.isHighestDegree)||t.education[0];return c?{profileKey:"education[0].degreeType",value:c.degreeType,confidence:e.confidence}:null},school:()=>{const c=t.education.find(l=>l.isHighestDegree)||t.education[0];return c?{profileKey:"education[0].schoolName",value:c.schoolName,confidence:e.confidence}:null},graduation_date:()=>{const c=t.education.find(l=>l.isHighestDegree)||t.education[0];return c?{profileKey:"education[0].graduationDate",value:g(c.graduationDate),confidence:e.confidence}:null},field_of_study:()=>{const c=t.education.find(l=>l.isHighestDegree)||t.education[0];return c?{profileKey:"education[0].fieldOfStudy",value:c.fieldOfStudy||"",confidence:e.confidence}:null},gpa:()=>{const c=t.education.find(l=>l.isHighestDegree)||t.education[0];return c!=null&&c.gpa?{profileKey:"education[0].gpa",value:c.gpa,confidence:e.confidence}:null},job_title:()=>{const c=t.workExperience[0];return c?{profileKey:"workExperience[0].jobTitle",value:c.jobTitle,confidence:e.confidence}:null},employer:()=>{const c=t.workExperience[0];return c?{profileKey:"workExperience[0].employerName",value:c.employerName,confidence:e.confidence}:null},start_date:()=>{const c=t.workExperience[0];return c?{profileKey:"workExperience[0].startDate",value:g(c.startDate),confidence:e.confidence}:null},end_date:()=>{const c=t.workExperience[0];return c?{profileKey:"workExperience[0].endDate",value:c.isCurrent?"Present":g(c.endDate),confidence:e.confidence}:null},supervisor:()=>{const c=t.workExperience[0];return c!=null&&c.supervisorName?{profileKey:"workExperience[0].supervisorName",value:c.supervisorName,confidence:e.confidence}:null},reason_leaving:()=>{const c=t.workExperience[0];return c!=null&&c.reasonForLeaving?{profileKey:"workExperience[0].reasonForLeaving",value:c.reasonForLeaving,confidence:e.confidence}:null},work_authorized:()=>({profileKey:"eeo.workAuthorized",value:o.workAuthorized??!0,confidence:e.confidence}),visa_sponsorship:()=>({profileKey:"eeo.requiresSponsorship",value:o.requiresSponsorship??!1,confidence:e.confidence}),veteran:()=>({profileKey:"eeo.veteranStatus",value:o.veteranStatus||"",confidence:e.confidence}),disability:()=>({profileKey:"eeo.disabilityStatus",value:o.disabilityStatus||"",confidence:e.confidence}),race_ethnicity:()=>({profileKey:"eeo.raceEthnicity",value:o.raceEthnicity||"",confidence:e.confidence}),gender:()=>({profileKey:"eeo.gender",value:o.gender||"",confidence:e.confidence}),salary:()=>i.desiredSalaryMin&&i.desiredSalaryMax?{profileKey:"preferences.desiredSalary",value:`$${i.desiredSalaryMin.toLocaleString()} - $${i.desiredSalaryMax.toLocaleString()}`,confidence:e.confidence}:i.desiredSalaryMin?{profileKey:"preferences.desiredSalaryMin",value:i.desiredSalaryMin.toString(),confidence:e.confidence}:null,start_date_available:()=>({profileKey:"preferences.availableDate",value:g(i.availableDate),confidence:e.confidence}),felony:()=>b(e,t,"felony_conviction"),misdemeanor:()=>b(e,t,"misdemeanor_conviction"),license_revoked:()=>b(e,t,"license_revoked"),malpractice:()=>b(e,t,"malpractice_claim"),background_check:()=>({profileKey:"screening.background_check",value:!0,confidence:e.confidence}),drug_screen:()=>({profileKey:"screening.drug_screen",value:!0,confidence:e.confidence})}[e.identifier];return s?s():null}function b(e,t,n){const o={...t.screeningAnswers.background,...t.screeningAnswers.clinical,...t.screeningAnswers.logistics}[n];return o?{profileKey:`screeningAnswers.${n}`,value:o.answer??!1,confidence:e.confidence}:{profileKey:`screeningAnswers.${n}`,value:!1,confidence:Math.max(.3,e.confidence-.2)}}function $(e,t){const n=(e.label+" "+e.placeholder+" "+e.ariaLabel).toLowerCase();let r=null;return n.includes("resume")||n.includes("cv")?r="resume":n.includes("cover letter")?r="cover_letter":n.includes("license")?r="license":n.includes("dea")?r="dea_registration":n.includes("certification")||n.includes("ancc")?r="certification":n.includes("malpractice")||n.includes("insurance")?r="malpractice_certificate":r=null,{field:e,profileKey:`documents.${r||"unknown"}`,value:"",fillMethod:"file",requiresAI:!1,requiresFile:!0,documentType:r,confidence:r?e.confidence:.3,status:"needs_file"}}function _(e,t){if(e.length===0)return null;let n=[...e];if(t.state){const o=n.filter(i=>i.licenseState.toLowerCase()===t.state.toLowerCase()||i.licenseState===(x[t.state]||t.state)||i.licenseState===(E[t.state.toUpperCase()]||t.state));o.length>0&&(n=o)}if(t.type){const o=n.filter(i=>i.licenseType.toLowerCase().includes(t.type.toLowerCase()));o.length>0&&(n=o)}return n.sort((o,i)=>o.status==="active"&&i.status!=="active"?-1:i.status==="active"&&o.status!=="active"?1:o.licenseType.includes("APRN")&&!i.licenseType.includes("APRN")?-1:i.licenseType.includes("APRN")&&!o.licenseType.includes("APRN")?1:0)[0]||null}function G(e,t){if(!e||t.length===0)return null;const n=e.toLowerCase().trim(),r=t.find(u=>u.toLowerCase().trim()===n);if(r)return r;const o=E[e.toUpperCase()];if(o){const u=t.find(d=>d.toLowerCase().includes(o.toLowerCase()));if(u)return u}const i=x[e];if(i){const u=t.find(d=>d.trim().toUpperCase()===i);if(u)return u}const a=t.find(u=>u.toLowerCase().includes(n));if(a)return a;const s=t.find(u=>n.includes(u.toLowerCase().trim())&&u.trim().length>1);if(s)return s;let c=null,l=.4;for(const u of t){const d=V(n,u.toLowerCase());d>l&&(l=d,c=u)}return c}function V(e,t){const n=e.toLowerCase().trim(),r=t.toLowerCase().trim();if(n===r)return 1;if(n.length===0||r.length===0)return 0;const o=Math.max(n.length,r.length);return 1-W(n,r)/o}function W(e,t){const n=e.length,r=t.length,o=Array.from({length:n+1},(i,a)=>Array.from({length:r+1},(s,c)=>a===0?c:c===0?a:0));for(let i=1;i<=n;i++)for(let a=1;a<=r;a++){const s=e[i-1]===t[a-1]?0:1;o[i][a]=Math.min(o[i-1][a]+1,o[i][a-1]+1,o[i-1][a-1]+s)}return o[n][r]}function g(e){if(!e)return"";try{const t=new Date(e);return isNaN(t.getTime())?"":t.toISOString().split("T")[0]}catch{return""}}async function Y(e){const t=await T(),n=M[t.fillSpeed]||50,r={total:e.length,filled:0,skipped:0,failed:0,needsAI:0,needsFile:0,details:[]},o=[...e].sort((i,a)=>{const s={text:0,date:1,select:2,radio:3,checkbox:4,file:5,ai_generate:6};return(s[i.fillMethod]??9)-(s[a.fillMethod]??9)});for(const i of o){if(i.requiresAI){r.needsAI++,r.details.push({field:i,status:"needs_review"});continue}if(i.requiresFile){r.needsFile++,r.details.push({field:i,status:"needs_review"});continue}if(i.status==="no_data"){r.skipped++,r.details.push({field:i,status:"skipped",error:"No profile data"});continue}if(i.status==="ambiguous"){r.skipped++,r.details.push({field:i,status:"skipped",error:"Ambiguous match"});continue}if(!t.overwriteExistingValues&&i.field.currentValue){r.skipped++,r.details.push({field:i,status:"skipped",error:"Already has value"});continue}try{const a=await y(i);r.details.push(a),a.status==="filled"?r.filled++:a.status==="failed"?r.failed++:r.skipped++}catch(a){r.failed++,r.details.push({field:i,status:"failed",error:a instanceof Error?a.message:"Unknown error"})}await p(n)}return r}async function y(e){const{field:t,value:n,fillMethod:r}=e,o=t.element;o.scrollIntoView({behavior:"smooth",block:"center"}),await p(50);try{switch(r){case"text":case"date":await X(o,String(n));break;case"select":await J(o,String(n));break;case"radio":await Z(o,n);break;case"checkbox":await te(o,n);break;default:return{field:e,status:"skipped",error:`Unsupported fill method: ${r}`}}return await p(100),!k(o,n)&&(await ne(o,String(n)),await p(100),!k(o,n))?{field:e,status:"needs_review",error:"Value may not have been set correctly"}:{field:e,status:"filled"}}catch(i){return{field:e,status:"failed",error:i instanceof Error?i.message:"Fill failed"}}}async function X(e,t){const n=e;n.focus(),n.dispatchEvent(new FocusEvent("focus",{bubbles:!0})),await p(30),n.value="",n.dispatchEvent(new Event("input",{bubbles:!0})),S(e,t),n.dispatchEvent(new Event("input",{bubbles:!0})),n.dispatchEvent(new Event("change",{bubbles:!0})),await p(20),n.dispatchEvent(new FocusEvent("blur",{bubbles:!0}))}function S(e,t){const n=e.tagName.toLowerCase();try{let r;n==="textarea"?r=Object.getOwnPropertyDescriptor(window.HTMLTextAreaElement.prototype,"value"):n==="input"?r=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"value"):n==="select"&&(r=Object.getOwnPropertyDescriptor(window.HTMLSelectElement.prototype,"value")),r!=null&&r.set?r.set.call(e,t):e.value=t}catch{e.value=t}e.dispatchEvent(new Event("input",{bubbles:!0})),e.dispatchEvent(new Event("change",{bubbles:!0}))}async function J(e,t){if(e.tagName.toLowerCase()==="select"){const n=e,o=Array.from(n.options).find(i=>i.value.toLowerCase()===t.toLowerCase()||i.text.toLowerCase().trim()===t.toLowerCase()||i.text.toLowerCase().includes(t.toLowerCase())||t.toLowerCase().includes(i.text.toLowerCase().trim()));o&&(n.value=o.value,S(e,o.value))}else await Q(e,t)}async function Q(e,t){var r;e.click(),e.dispatchEvent(new MouseEvent("mousedown",{bubbles:!0})),e.dispatchEvent(new MouseEvent("mouseup",{bubbles:!0})),await p(300);const n=['[role="option"]','[data-automation-id*="promptOption"]','li[role="presentation"]',".dropdown-option",'[class*="option"]',"li"];for(const o of n){const i=document.querySelectorAll(o);for(const a of i){const s=((r=a.textContent)==null?void 0:r.trim().toLowerCase())||"";if(s===t.toLowerCase()||s.includes(t.toLowerCase())){a.click(),await p(100);return}}}}async function Z(e,t){const n=e.name;if(!n)return;const r=document.querySelectorAll(`input[type="radio"][name="${CSS.escape(n)}"]`),o=typeof t=="boolean"?t?"yes":"no":String(t).toLowerCase();for(const i of r){const a=i.value.toLowerCase(),s=ee(i).toLowerCase();if(a===o||s===o||s.includes(o)||o==="yes"&&(a==="true"||a==="1"||s==="yes")||o==="no"&&(a==="false"||a==="0"||s==="no")){i.checked=!0,i.click(),i.dispatchEvent(new Event("change",{bubbles:!0}));return}}}function ee(e){var r,o,i;if(e.id){const a=document.querySelector(`label[for="${CSS.escape(e.id)}"]`);if(a)return((r=a.textContent)==null?void 0:r.trim())||""}const t=e.closest("label");if(t)return((o=t.textContent)==null?void 0:o.trim())||"";const n=e.nextSibling;return n&&n.nodeType===Node.TEXT_NODE?((i=n.textContent)==null?void 0:i.trim())||"":e.value}async function te(e,t){const n=e,r=typeof t=="boolean"?t:t==="true"||t==="yes"||t==="1";n.checked!==r&&(n.click(),n.dispatchEvent(new Event("change",{bubbles:!0})))}async function ne(e,t){const n=e;n.focus(),n.value="";for(let r=0;r<t.length;r++){const o=t[r];n.dispatchEvent(new KeyboardEvent("keydown",{key:o,bubbles:!0})),n.value+=o,n.dispatchEvent(new InputEvent("input",{data:o,inputType:"insertText",bubbles:!0})),n.dispatchEvent(new KeyboardEvent("keyup",{key:o,bubbles:!0})),await p(10)}n.dispatchEvent(new Event("change",{bubbles:!0})),n.dispatchEvent(new FocusEvent("blur",{bubbles:!0}))}function k(e,t){var i;const n=e;if(e.tagName.toLowerCase()==="input"&&e.type==="checkbox"){const a=typeof t=="boolean"?t:t==="true";return e.checked===a}if(e.tagName.toLowerCase()==="input"&&e.type==="radio")return e.checked;const r=((i=n.value)==null?void 0:i.toLowerCase().trim())||"",o=String(t).toLowerCase().trim();return r===o||r.length>0&&r.includes(o.substring(0,5))}function p(e){return new Promise(t=>setTimeout(t,e))}const re={legalNameSection_firstName:{identifier:"first_name",category:"personal"},legalNameSection_lastName:{identifier:"last_name",category:"personal"},addressSection_addressLine1:{identifier:"address_line1",category:"personal"},addressSection_city:{identifier:"city",category:"personal"},addressSection_countryRegion:{identifier:"state",category:"personal"},addressSection_postalCode:{identifier:"zip",category:"personal"},"phone-number":{identifier:"phone",category:"personal"},email:{identifier:"email",category:"personal"}};function oe(){const e=window.location.href.toLowerCase();return e.includes("myworkdayjobs.com")||e.includes("wd5.myworkday.com")||e.includes("workday.com")?!0:!!document.querySelector("[data-automation-id]")}function ie(){const e=m(),t=document.querySelectorAll("[data-automation-id]");for(const n of t){const r=n.getAttribute("data-automation-id")||"",o=Object.entries(re).find(([i])=>r.includes(i));if(o){const i=e.find(a=>a.element===n);i&&(i.identifier=o[1].identifier,i.confidence=.95,i.atsSpecific=!0)}}return e}async function ae(e){return y(e)}async function ce(e,t){var r;e.click(),await new Promise(o=>setTimeout(o,400));const n=document.querySelectorAll('[data-automation-id*="promptOption"], [role="option"]');for(const o of n){const i=((r=o.textContent)==null?void 0:r.trim().toLowerCase())||"";if(i===t.toLowerCase()||i.includes(t.toLowerCase()))return o.click(),await new Promise(a=>setTimeout(a,200)),!0}return!1}async function se(e,t){return!1}function le(){const e=document.querySelectorAll('[data-automation-id*="progressBarStep"], [class*="step"]'),t=document.querySelector('[data-automation-id*="progressBarStep"][aria-current="step"], [class*="active"]');return{currentStep:t?Array.from(e).indexOf(t)+1:1,totalSteps:e.length||1}}const de={name:"Workday",detect:oe,detectFields:ie,fillField:ae,handleDropdown:ce,handleFileUpload:se,handleMultiStep:le},ue={first_name:"first_name",last_name:"last_name",email:"email",phone:"phone",location:"city"};function fe(){const e=window.location.href.toLowerCase();return e.includes("boards.greenhouse.io")||e.includes("job-boards.greenhouse.io")?!0:!!document.getElementById("application_form")||!!document.querySelector(".application-form")}function pe(){const e=m();for(const t of e){const n=t.id.toLowerCase();for(const[r,o]of Object.entries(ue))(n===r||n.includes(r))&&(t.identifier=o,t.confidence=.95,t.atsSpecific=!0);n.includes("job_application_answers_attributes")&&(t.atsSpecific=!0,t.fieldType==="textarea"&&(t.identifier="open_ended_question",t.fieldCategory="open_ended"))}return e}async function me(e){return y(e)}async function ye(e,t){if(e.tagName.toLowerCase()==="select"){const r=e;for(const o of r.options)if(o.text.toLowerCase().includes(t.toLowerCase()))return r.value=o.value,r.dispatchEvent(new Event("change",{bubbles:!0})),!0}e.click(),await new Promise(r=>setTimeout(r,300));const n=document.querySelector(".select2-search__field, .chosen-search-input");if(n){n.value=t,n.dispatchEvent(new Event("input",{bubbles:!0})),await new Promise(o=>setTimeout(o,300));const r=document.querySelector(".select2-results__option--highlighted, .active-result");if(r)return r.click(),!0}return!1}async function he(e,t){return!1}const ge={name:"Greenhouse",detect:fe,detectFields:pe,fillField:me,handleDropdown:ye,handleFileUpload:he};function be(){const e=window.location.href.toLowerCase();return e.includes("jobs.lever.co")||e.includes("lever.co/apply")}function we(){const e=m();for(const t of e){const n=t.name.toLowerCase();n==="name"?(t.identifier="full_name",t.confidence=.95,t.atsSpecific=!0):n==="email"?(t.identifier="email",t.confidence=.95,t.atsSpecific=!0):n==="phone"?(t.identifier="phone",t.confidence=.95,t.atsSpecific=!0):n==="org"?(t.identifier="employer",t.confidence=.9,t.atsSpecific=!0):n.includes("urls[linkedin]")?(t.identifier="linkedin",t.confidence=.95,t.atsSpecific=!0):n==="comments"?(t.identifier="open_ended_question",t.fieldCategory="open_ended",t.confidence=.8,t.atsSpecific=!0):n==="resume"&&(t.identifier="resume_upload",t.fieldCategory="document",t.confidence=.95,t.atsSpecific=!0)}return e}async function ve(e){return y(e)}async function _e(e,t){if(e.tagName.toLowerCase()==="select"){const n=e;for(const r of n.options)if(r.text.toLowerCase().includes(t.toLowerCase()))return n.value=r.value,n.dispatchEvent(new Event("change",{bubbles:!0})),!0}return!1}async function Se(e,t){return!1}const Ce={name:"Lever",detect:be,detectFields:we,fillField:ve,handleDropdown:_e,handleFileUpload:Se};function Le(){return window.location.href.toLowerCase().includes("icims.com")?!0:!!document.querySelector('[class*="iCIMS"]')}function ke(){var t;const e=m();try{const n=document.querySelectorAll("iframe");for(const r of n)try{const o=r.contentDocument;if(o&&o.querySelectorAll("input, select, textarea").length>0)for(const a of e)(t=r.contentDocument)!=null&&t.contains(a.element)&&(a.atsSpecific=!0)}catch{}}catch{}return e}async function Ee(e){return y(e)}async function xe(e,t){if(e.tagName.toLowerCase()==="select"){const n=e;for(const r of n.options)if(r.text.toLowerCase().includes(t.toLowerCase()))return n.value=r.value,n.dispatchEvent(new Event("change",{bubbles:!0})),!0}return!1}async function Ae(e,t){return!1}const Fe={name:"iCIMS",detect:Le,detectFields:ke,fillField:Ee,handleDropdown:xe,handleFileUpload:Ae};function Ne(){return window.location.href.toLowerCase().includes("ashbyhq.com")}function Me(){return m()}async function Te(e){return S(e.field.element,String(e.value)),y(e)}async function De(e,t){var r;e.click(),await new Promise(o=>setTimeout(o,300));const n=document.querySelectorAll('[role="option"]');for(const o of n)if((r=o.textContent)!=null&&r.toLowerCase().includes(t.toLowerCase()))return o.click(),!0;return!1}async function Pe(e,t){return!1}const Ke={name:"Ashby",detect:Ne,detectFields:Me,fillField:Te,handleDropdown:De,handleFileUpload:Pe};function qe(){return window.location.href.toLowerCase().includes("jobs.smartrecruiters.com")}function Ie(){return m()}async function He(e){return y(e)}async function Re(e,t){if(e.tagName.toLowerCase()==="select"){const n=e;for(const r of n.options)if(r.text.toLowerCase().includes(t.toLowerCase()))return n.value=r.value,n.dispatchEvent(new Event("change",{bubbles:!0})),!0}return!1}async function Ue(e,t){return!1}const Oe={name:"SmartRecruiters",detect:qe,detectFields:Ie,fillField:He,handleDropdown:Re,handleFileUpload:Ue};function je(){const e=window.location.href.toLowerCase();return e.includes("bamboohr.com/careers")||e.includes("bamboohr.com/jobs")}function ze(){return m()}async function Be(e){return y(e)}async function $e(e,t){if(e.tagName.toLowerCase()==="select"){const n=e;for(const r of n.options)if(r.text.toLowerCase().includes(t.toLowerCase()))return n.value=r.value,n.dispatchEvent(new Event("change",{bubbles:!0})),!0}return!1}async function Ge(e,t){return!1}const Ve={name:"BambooHR",detect:je,detectFields:ze,fillField:Be,handleDropdown:$e,handleFileUpload:Ge};function We(){return!0}function Ye(){return m()}async function Xe(e){return y(e)}async function Je(e,t){var r;if(e.tagName.toLowerCase()==="select"){const o=e;for(const i of o.options)if(i.text.toLowerCase().includes(t.toLowerCase()))return o.value=i.value,o.dispatchEvent(new Event("change",{bubbles:!0})),!0}e.click(),await new Promise(o=>setTimeout(o,300));const n=document.querySelectorAll('[role="option"], [class*="option"], li');for(const o of n)if((r=o.textContent)!=null&&r.toLowerCase().includes(t.toLowerCase()))return o.click(),!0;return!1}async function Qe(e,t){return!1}const F={name:"Generic",detect:We,detectFields:Ye,fillField:Xe,handleDropdown:Je,handleFileUpload:Qe},Ze=[de,ge,Ce,Fe,Ke,Oe,Ve,F];function N(){for(const e of Ze)if(e.detect())return console.log(`[PMHNP] ATS detected: ${e.name}`),e;return F}let w=null;chrome.runtime.onMessage.addListener((e,t,n)=>(et(e).then(n).catch(r=>{D(r,`content:${e.type}`),n({error:r instanceof Error?r.message:"Unknown error"})}),!0));async function et(e){switch(e.type){case"IS_APPLICATION_PAGE":{const t=U(),r=N().detectFields();return{isApplication:O(),atsName:(t==null?void 0:t.name)||null,fieldCount:r.length}}case"START_AUTOFILL":return tt();case"PROFILE_UPDATED":return w=null,{success:!0};default:return{}}}async function tt(){if(console.log("[PMHNP] Starting autofill..."),!w){const o=await chrome.runtime.sendMessage({type:"GET_PROFILE"});if(o!=null&&o.error)throw new Error(o.error);w=o}const e=N();console.log(`[PMHNP] Using handler: ${e.name}`);const t=e.detectFields();if(console.log(`[PMHNP] Detected ${t.length} form fields`),t.length===0)throw new Error("No form fields detected on this page");const n=j(t,w);console.log(`[PMHNP] Mapped ${n.length} fields to profile data`);const r=await Y(n);return console.log(`[PMHNP] Fill complete: ${r.filled}/${r.total} fields filled`),r}console.log("[PMHNP] Content script loaded");
